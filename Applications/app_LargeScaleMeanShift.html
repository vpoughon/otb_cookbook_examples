

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>LargeScaleMeanShift &mdash; OTB CookBook 6.7.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/otb_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="OGRLayerClassifier" href="app_OGRLayerClassifier.html" />
    <link rel="prev" title="LSMSVectorization" href="app_LSMSVectorization.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index_TOC.html" class="icon icon-home"> OTB CookBook
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                6.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to Orfeo ToolBox!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CompilingOTBFromSource.html">Compiling OTB from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OTB-Applications.html">A brief tour of OTB Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../QGIS-interface.html">QGIS interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Monteverdi.html">Monteverdi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AdvancedUse.html">Advanced Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Recipes.html">Recipes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Applications.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Image_Manipulation.html">Image Manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Feature_Extraction.html">Feature Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="Stereo.html">Stereo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Geometry.html">Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="Learning.html">Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAR.html">SAR</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Segmentation.html">Segmentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="app_ComputeOGRLayersFeaturesStatistics.html">ComputeOGRLayersFeaturesStatistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ConnectedComponentSegmentation.html">ConnectedComponentSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_HooverCompareSegmentation.html">HooverCompareSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSSegmentation.html">LSMSSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSSmallRegionsMerging.html">LSMSSmallRegionsMerging</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSVectorization.html">LSMSVectorization</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">LargeScaleMeanShift</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app_OGRLayerClassifier.html">OGRLayerClassifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_Segmentation.html">Segmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_SmallRegionsMerging.html">SmallRegionsMerging</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ComputeOGRLayersFeaturesStatistics.html">ComputeOGRLayersFeaturesStatistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ConnectedComponentSegmentation.html">ConnectedComponentSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_HooverCompareSegmentation.html">HooverCompareSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSSegmentation.html">LSMSSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSSmallRegionsMerging.html">LSMSSmallRegionsMerging</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSVectorization.html">LSMSVectorization</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">LargeScaleMeanShift</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app_OGRLayerClassifier.html">OGRLayerClassifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_Segmentation.html">Segmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_SmallRegionsMerging.html">SmallRegionsMerging</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ComputeOGRLayersFeaturesStatistics.html">ComputeOGRLayersFeaturesStatistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ConnectedComponentSegmentation.html">ConnectedComponentSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_HooverCompareSegmentation.html">HooverCompareSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSSegmentation.html">LSMSSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSSmallRegionsMerging.html">LSMSSmallRegionsMerging</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSVectorization.html">LSMSVectorization</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">LargeScaleMeanShift</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app_OGRLayerClassifier.html">OGRLayerClassifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_Segmentation.html">Segmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_SmallRegionsMerging.html">SmallRegionsMerging</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ComputeOGRLayersFeaturesStatistics.html">ComputeOGRLayersFeaturesStatistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ConnectedComponentSegmentation.html">ConnectedComponentSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_HooverCompareSegmentation.html">HooverCompareSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSSegmentation.html">LSMSSegmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSSmallRegionsMerging.html">LSMSSmallRegionsMerging</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_LSMSVectorization.html">LSMSVectorization</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">LargeScaleMeanShift</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app_OGRLayerClassifier.html">OGRLayerClassifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_Segmentation.html">Segmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_SmallRegionsMerging.html">SmallRegionsMerging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Vector_Data_Manipulation.html">Vector Data Manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Image_Filtering.html">Image Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hyperspectral.html">Hyperspectral</a></li>
<li class="toctree-l2"><a class="reference internal" href="Change_Detection.html">Change Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="Calibration.html">Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="Deprecated.html">Deprecated</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../C++.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contributors.html">Contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index_TOC.html">OTB CookBook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index_TOC.html">Docs</a> &raquo;</li>
        
          <li><a href="../Applications.html">Applications</a> &raquo;</li>
        
          <li><a href="Segmentation.html">Segmentation</a> &raquo;</li>
        
      <li>LargeScaleMeanShift</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://gitlab.orfeo-toolbox.org/orfeotoolbox/OTB/blob/develop/Documentation/Cookbook/rst/Applications/app_LargeScaleMeanShift.rst" class="fa fa-gitlab"> Edit on GitLab</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="largescalemeanshift">
<span id="app-largescalemeanshift"></span><h1>LargeScaleMeanShift<a class="headerlink" href="#largescalemeanshift" title="Permalink to this headline">¶</a></h1>
<p>Large-scale segmentation using MeanShift</p>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This application chains together the 4 steps of the MeanShit framework, that is the <a class="reference internal" href="app_MeanShiftSmoothing.html#app-meanshiftsmoothing"><span class="std std-ref">MeanShiftSmoothing</span></a>, the <a class="reference internal" href="app_LSMSSegmentation.html#app-lsmssegmentation"><span class="std std-ref">LSMSSegmentation</span></a>, the <a class="reference internal" href="app_LSMSSmallRegionsMerging.html#app-lsmssmallregionsmerging"><span class="std std-ref">LSMSSmallRegionsMerging</span></a> and the <a class="reference internal" href="app_LSMSVectorization.html#app-lsmsvectorization"><span class="std std-ref">LSMSVectorization</span></a>.</p>
<p>This application can be a preliminary step for an object-based analysis.</p>
<p>It generates a vector data file containing the regions extracted with the MeanShift algorithm. The spatial and range radius parameters allow adapting the sensitivity of the algorithm depending on the image dynamic and resolution. There is a step to remove small regions whose size (in pixels) is less than the given ‘minsize’ parameter. These regions are merged to a similar neighbor region. In the output vectors, there are additional fields to describe each region. In particular the mean and standard deviation (for each band) is computed for each region using the input image as support. If an optional ‘imfield’ image is given, it will be used as support image instead.</p>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#segmentation-as-vector-output-options" id="id1">Segmentation as vector output options</a></li>
<li><a class="reference internal" href="#standard-segmentation-with-labeled-raster-output-options" id="id2">Standard segmentation with labeled raster output options</a></li>
</ul>
</div>
<p><strong>Input Image</strong> <code class="code docutils literal notranslate"><span class="pre">-in</span> <span class="pre">image</span></code> <em>Mandatory</em> <br />
The input image can be any single or multiband image. Beware of pontential imbalance between bands ranges as it may alter euclidean distance.</p>
<p><strong>Spatial radius</strong> <code class="code docutils literal notranslate"><span class="pre">-spatialr</span> <span class="pre">int</span></code> <em>Default value: 5</em> <br />
Radius of the spatial neighborhood for averaging. Higher values will result in more smoothing and higher processing time.</p>
<p><strong>Range radius</strong> <code class="code docutils literal notranslate"><span class="pre">-ranger</span> <span class="pre">float</span></code> <em>Default value: 15</em> <br />
Threshold on spectral signature euclidean distance (expressed in radiometry unit) to consider neighborhood pixel for averaging. Higher values will be less edge-preserving (more similar to simple average in neighborhood), whereas lower values will result in less noise smoothing. Note that this parameter has no effect on processing time.</p>
<p><strong>Minimum Segment Size</strong> <code class="code docutils literal notranslate"><span class="pre">-minsize</span> <span class="pre">int</span></code> <em>Default value: 50</em> <br />
Minimum Segment Size. If, after the  segmentation, a segment is of size strictly lower than this criterion, the segment is merged with the segment that has the closest sepctral signature.</p>
<p><strong>Size of tiles in pixel (X-axis)</strong> <code class="code docutils literal notranslate"><span class="pre">-tilesizex</span> <span class="pre">int</span></code> <em>Default value: 500</em> <br />
Size of tiles along the X-axis for tile-wise processing.</p>
<p><strong>Size of tiles in pixel (Y-axis)</strong> <code class="code docutils literal notranslate"><span class="pre">-tilesizey</span> <span class="pre">int</span></code> <em>Default value: 500</em> <br />
Size of tiles along the Y-axis for tile-wise processing.</p>
<p><strong>Output mode</strong> <code class="code docutils literal notranslate"><span class="pre">-mode</span> <span class="pre">[vector|raster]</span></code> <em>Default value: vector</em> <br />
Type of segmented output</p>
<ul class="simple">
<li><strong>Segmentation as vector output</strong> <br /> In this mode, the application will produce a vector file or database and compute field values for each region</li>
<li><strong>Standard segmentation with labeled raster output</strong> <br /> In this mode, the application will produce a standard labeled raster.</li>
</ul>
<div class="section" id="segmentation-as-vector-output-options">
<h3><a class="toc-backref" href="#id1">Segmentation as vector output options</a><a class="headerlink" href="#segmentation-as-vector-output-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Support image for field computation</strong> <code class="code docutils literal notranslate"><span class="pre">-mode.vector.imfield</span> <span class="pre">image</span></code> <br />
This is an optional support image that can be used to compute field values in each region. Otherwise, the input image is used as support.</p>
<p><strong>Output GIS vector file</strong> <code class="code docutils literal notranslate"><span class="pre">-mode.vector.out</span> <span class="pre">filename</span> <span class="pre">[dtype]</span></code> <em>Mandatory</em> <br />
The output GIS vector file, representing the vectorized version of the segmented image where the features of the polygons are the radiometric means and variances.</p>
</div>
<div class="section" id="standard-segmentation-with-labeled-raster-output-options">
<h3><a class="toc-backref" href="#id2">Standard segmentation with labeled raster output options</a><a class="headerlink" href="#standard-segmentation-with-labeled-raster-output-options" title="Permalink to this headline">¶</a></h3>
<p><strong>The output raster image</strong> <code class="code docutils literal notranslate"><span class="pre">-mode.raster.out</span> <span class="pre">image</span> <span class="pre">[dtype]</span></code> <em>Mandatory</em> <br />
It corresponds to the output of the small region merging step.</p>
<hr class="docutils" />
<p><strong>Temporary files cleaning</strong> <code class="code docutils literal notranslate"><span class="pre">-cleanup</span> <span class="pre">bool</span></code> <em>Default value: true</em> <br />
If activated, the application will try to clean all temporary files it created</p>
<p><strong>Available RAM (MB)</strong> <code class="code docutils literal notranslate"><span class="pre">-ram</span> <span class="pre">int</span></code> <em>Default value: 256</em> <br />
Available memory for processing (in MB).</p>
<p><strong>Load parameters from XML</strong> <code class="code docutils literal notranslate"><span class="pre">-inxml</span> <span class="pre">filename.xml</span></code> <br />
Load application parameters from an XML file.</p>
<p><strong>Save parameters to XML</strong> <code class="code docutils literal notranslate"><span class="pre">-outxml</span> <span class="pre">filename.xml</span></code> <br />
Save application parameters to an XML file.</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>From the command-line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>otbcli_LargeScaleMeanShift -in QB_1_ortho.tif -spatialr <span class="m">4</span> -ranger <span class="m">80</span> -minsize <span class="m">16</span> -mode.vector.out regions.shp
</pre></div>
</div>
<p>From Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">otbApplication</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">otbApplication</span><span class="o">.</span><span class="n">Registry</span><span class="o">.</span><span class="n">CreateApplication</span><span class="p">(</span><span class="s2">&quot;LargeScaleMeanShift&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">SetParameterString</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;QB_1_ortho.tif&quot;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterInt</span><span class="p">(</span><span class="s2">&quot;spatialr&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterFloat</span><span class="p">(</span><span class="s2">&quot;ranger&quot;</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterInt</span><span class="p">(</span><span class="s2">&quot;minsize&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterString</span><span class="p">(</span><span class="s2">&quot;mode.vector.out&quot;</span><span class="p">,</span> <span class="s2">&quot;regions.shp&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">ExecuteAndWriteOutput</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><a class="reference internal" href="app_MeanShiftSmoothing.html#app-meanshiftsmoothing"><span class="std std-ref">MeanShiftSmoothing</span></a></div>
<div class="line"><a class="reference internal" href="app_LSMSSegmentation.html#app-lsmssegmentation"><span class="std std-ref">LSMSSegmentation</span></a></div>
<div class="line"><a class="reference internal" href="app_LSMSSmallRegionsMerging.html#app-lsmssmallregionsmerging"><span class="std std-ref">LSMSSmallRegionsMerging</span></a></div>
<div class="line"><a class="reference internal" href="app_LSMSVectorization.html#app-lsmsvectorization"><span class="std std-ref">LSMSVectorization</span></a></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="app_OGRLayerClassifier.html" class="btn btn-neutral float-right" title="OGRLayerClassifier" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="app_LSMSVectorization.html" class="btn btn-neutral" title="LSMSVectorization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 CNES. The OTB CookBook is licensed under a Creative Commons Attribution-ShareAlike 4.0 International license (CC-BY-SA).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>