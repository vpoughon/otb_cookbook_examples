

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ContrastEnhancement &mdash; Orfeo ToolBox 6.7.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/otb_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Despeckle" href="app_Despeckle.html" />
    <link rel="prev" title="Image Filtering" href="Image_Filtering.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo-with-text.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                6.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Monteverdi.html">Monteverdi</a></li>
</ul>
<p class="caption"><span class="caption-text">Applications</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../CliInterface.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GraphicalInterface.html">Graphical interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PythonAPI.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../QGISInterface.html">QGIS interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Applications.html">All Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Image_Manipulation.html">Image Manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Feature_Extraction.html">Feature Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="Stereo.html">Stereo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Geometry.html">Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="Learning.html">Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAR.html">SAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="Segmentation.html">Segmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Vector_Data_Manipulation.html">Vector Data Manipulation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Image_Filtering.html">Image Filtering</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">ContrastEnhancement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app_Despeckle.html">Despeckle</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_DimensionalityReduction.html">DimensionalityReduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_DomainTransform.html">DomainTransform</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_MeanShiftSmoothing.html">MeanShiftSmoothing</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_Smoothing.html">Smoothing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Hyperspectral.html">Hyperspectral</a></li>
<li class="toctree-l2"><a class="reference internal" href="Change_Detection.html">Change Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="Calibration.html">Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="Deprecated.html">Deprecated</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Recipes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../recipes/optpreproc.html">From raw image to calibrated product</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/sarprocessing.html">SAR processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/residual_registration.html">Residual registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/improc.html">Image processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/contrast_enhancement.html">Enhance local contrast</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/pbclassif.html">Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/featextract.html">Feature extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/stereo.html">Stereoscopic reconstruction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/hyperspectral.html">Hyperspectral image processing</a></li>
</ul>
<p class="caption"><span class="caption-text">C++ API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../C++/SystemOverview.html">System Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../C++/Tutorial.html">Building simple OTB code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../C++/UserGuide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../C++/BandMathX.html">BandMathImageFilterX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../C++/Examples.html">C++ Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../C++/DeveloperGuide.html">Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced use</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../EnvironmentVariables.html">Environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExtendedFilenames.html">Extended filenames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CompilingOTBFromSource.html">Compiling OTB from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contributors.html">Contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Orfeo ToolBox</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../Applications.html">All Applications</a> &raquo;</li>
        
          <li><a href="Image_Filtering.html">Image Filtering</a> &raquo;</li>
        
      <li>ContrastEnhancement</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://gitlab.orfeo-toolbox.org/orfeotoolbox/OTB/blob/develop/Documentation/Cookbook/rst/Applications/app_ContrastEnhancement.rst" class="fa fa-gitlab"> Edit on GitLab</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="contrastenhancement">
<span id="id1"></span><h1>ContrastEnhancement<a class="headerlink" href="#contrastenhancement" title="Permalink to this headline">¶</a></h1>
<p>This application is the implementation of the histogram equalization algorithm. It can be used to enhance contrast in an image or to reduce the dynamic of the image without losing too much contrast. It offers several options as a no data value, a contrast limitation factor, a local version of the algorithm and also a mode to equalize the luminance of the image.</p>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This application is the implementation of the histogram equalization algorithm. The idea of the algorithm is to use the whole available dynamic. In order to do so it computes a histogram over the image and then use the whole dynamic: meaning flattening the histogram. That gives us gain for each bin that transform the original histogram into the flat one. This gain is then apply on the original image.</p>
<p>The application proposes several options to allow a finer result:</p>
<ul class="simple">
<li>There is an option to limit contrast. We choose to limit the contrast by modifying the original histogram. To do so we clip the histogram at a given height and redistribute equally among the bins the clipped population. Then we add a local version of the algorithm.</li>
<li>It is possible to apply the algorithm on tiles of the image, instead of on the whole image. That gives us gain depending on the value of the pixel and its position in the image. In order to smoothen the result we interpolate the gain between tiles.</li>
</ul>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#local-options" id="id2">Local options</a></li>
<li><a class="reference internal" href="#automatic-options" id="id3">Automatic options</a></li>
<li><a class="reference internal" href="#manual-settings-for-min-max-values-options" id="id4">Manual settings for min/max values options</a></li>
<li><a class="reference internal" href="#luminance-options" id="id5">Luminance options</a></li>
<li><a class="reference internal" href="#red-channel" id="id6">Red channel</a></li>
<li><a class="reference internal" href="#green-channel" id="id7">Green channel</a></li>
<li><a class="reference internal" href="#blue-channel" id="id8">Blue channel</a></li>
</ul>
</div>
<p><strong>Input Image</strong> <code class="code docutils literal notranslate"><span class="pre">-in</span> <span class="pre">image</span></code> <em>Mandatory</em> <br />
Input image.</p>
<p><strong>Output Image</strong> <code class="code docutils literal notranslate"><span class="pre">-out</span> <span class="pre">image</span> <span class="pre">[dtype]</span></code> <em>Mandatory</em> <br />
Output image.</p>
<p><strong>Number of bins</strong> <code class="code docutils literal notranslate"><span class="pre">-bins</span> <span class="pre">int</span></code> <em>Default value: 256</em> <br />
Number of bins in the histogram</p>
<p><strong>Contrast Limitation</strong> <code class="code docutils literal notranslate"><span class="pre">-hfact</span> <span class="pre">float</span></code> <br />
This parameter will set the maximum height accepted in a bin on the input image histogram. The maximum height will be computed as hfact*eqHeight where eqHeight is the height of the theoretical flat histogram. The higher hfact, the higher the contrast.
When using ‘luminance mode’, it is recommended to limit this factor to a small value (ex: 4)</p>
<p><strong>Nodata Value</strong> <code class="code docutils literal notranslate"><span class="pre">-nodata</span> <span class="pre">float</span></code> <br />
If there is a value in the image that has no visualization meaning, it can be ignored by the algorithm.</p>
<p><strong>Spatial parameters for the histogram computation</strong> <code class="code docutils literal notranslate"><span class="pre">-spatial</span> <span class="pre">[local|global]</span></code> <em>Default value: local</em> <br /></p>
<ul class="simple">
<li><strong>Local</strong> <br /> The histograms will be computed on each thumbnail. Each of the histogram will be equalized and the corresponding gain will be interpolated.</li>
<li><strong>Global</strong> <br /> The histogram will be computed on the whole image. The equalization will be computed on this histogram.</li>
</ul>
<div class="section" id="local-options">
<h3><a class="toc-backref" href="#id2">Local options</a><a class="headerlink" href="#local-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Thumbnail height</strong> <code class="code docutils literal notranslate"><span class="pre">-spatial.local.h</span> <span class="pre">int</span></code> <em>Default value: 256</em> <br />
Height of the thumbnail over which the histogram will be computed. The value is in pixels.</p>
<p><strong>Thumbnail width</strong> <code class="code docutils literal notranslate"><span class="pre">-spatial.local.w</span> <span class="pre">int</span></code> <em>Default value: 256</em> <br />
Width of the thumbnail over which the histogram will be computed. The value is in pixels.</p>
<hr class="docutils" />
<p><strong>Minimum and maximum settings</strong> <code class="code docutils literal notranslate"><span class="pre">-minmax</span> <span class="pre">[auto|manual]</span></code> <em>Default value: auto</em> <br />
Minimum and maximum value that will bound the histogram and thus the dynamic of the resulting image. Values over those boundaries will be clipped.</p>
<ul class="simple">
<li><strong>Automatic</strong> <br /> Minimum and maximum value will be computed on the image (nodata value won’t be taken into account) . Each band will have a minimum and a maximum.</li>
<li><strong>Manual settings for min/max values</strong> <br /> Minimum and maximum value will be set by the user</li>
</ul>
</div>
<div class="section" id="automatic-options">
<h3><a class="toc-backref" href="#id3">Automatic options</a><a class="headerlink" href="#automatic-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Global</strong> <code class="code docutils literal notranslate"><span class="pre">-minmax.auto.global</span> <span class="pre">bool</span></code> <em>Default value: false</em> <br />
Min/max computation will result in the same minimum and maximum for all the bands.</p>
</div>
<div class="section" id="manual-settings-for-min-max-values-options">
<h3><a class="toc-backref" href="#id4">Manual settings for min/max values options</a><a class="headerlink" href="#manual-settings-for-min-max-values-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Minimum value</strong> <code class="code docutils literal notranslate"><span class="pre">-minmax.manual.min</span> <span class="pre">float</span></code> <br /></p>
<p><strong>Maximum value</strong> <code class="code docutils literal notranslate"><span class="pre">-minmax.manual.max</span> <span class="pre">float</span></code> <br /></p>
<hr class="docutils" />
<p><strong>What to equalized</strong> <code class="code docutils literal notranslate"><span class="pre">-mode</span> <span class="pre">[each|lum]</span></code> <em>Default value: each</em> <br /></p>
<ul class="simple">
<li><strong>Channels</strong> <br /> Each channel is equalized independently</li>
<li><strong>Luminance</strong> <br /> The relative luminance is computed according to the coefficients.Then the histogram is equalized and the gain is applied to each of the channels. The channel gain will depend on the weight (coef) of the channel in the luminance. <br /> Note that default values come from color space theories on how human eyes perceive colors)</li>
</ul>
</div>
<div class="section" id="luminance-options">
<h3><a class="toc-backref" href="#id5">Luminance options</a><a class="headerlink" href="#luminance-options" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="red-channel">
<h3><a class="toc-backref" href="#id6">Red channel</a><a class="headerlink" href="#red-channel" title="Permalink to this headline">¶</a></h3>
<p><strong>Red channel</strong> <code class="code docutils literal notranslate"><span class="pre">-mode.lum.red.ch</span> <span class="pre">int</span></code> <em>Default value: 0</em> <br /></p>
<p><strong>Value for luminance computation for the red channel</strong> <code class="code docutils literal notranslate"><span class="pre">-mode.lum.red.coef</span> <span class="pre">float</span></code> <em>Default value: 0.21</em> <br /></p>
</div>
<div class="section" id="green-channel">
<h3><a class="toc-backref" href="#id7">Green channel</a><a class="headerlink" href="#green-channel" title="Permalink to this headline">¶</a></h3>
<p><strong>Green channel</strong> <code class="code docutils literal notranslate"><span class="pre">-mode.lum.green.ch</span> <span class="pre">int</span></code> <em>Default value: 1</em> <br /></p>
<p><strong>Value for luminance computation of the green channel</strong> <code class="code docutils literal notranslate"><span class="pre">-mode.lum.green.coef</span> <span class="pre">float</span></code> <em>Default value: 0.71</em> <br /></p>
</div>
<div class="section" id="blue-channel">
<h3><a class="toc-backref" href="#id8">Blue channel</a><a class="headerlink" href="#blue-channel" title="Permalink to this headline">¶</a></h3>
<p><strong>Blue channel</strong> <code class="code docutils literal notranslate"><span class="pre">-mode.lum.blue.ch</span> <span class="pre">int</span></code> <em>Default value: 2</em> <br /></p>
<p><strong>Value for luminance computation of the blue channel</strong> <code class="code docutils literal notranslate"><span class="pre">-mode.lum.blue.coef</span> <span class="pre">float</span></code> <em>Default value: 0.08</em> <br /></p>
<hr class="docutils" />
<p><strong>Available RAM (MB)</strong> <code class="code docutils literal notranslate"><span class="pre">-ram</span> <span class="pre">int</span></code> <em>Default value: 256</em> <br />
Available memory for processing (in MB).</p>
<p><strong>Load parameters from XML</strong> <code class="code docutils literal notranslate"><span class="pre">-inxml</span> <span class="pre">filename.xml</span></code> <br />
Load application parameters from an XML file.</p>
<p><strong>Save parameters to XML</strong> <code class="code docutils literal notranslate"><span class="pre">-outxml</span> <span class="pre">filename.xml</span></code> <br />
Save application parameters to an XML file.</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>From the command-line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Local contrast enhancement by luminance</span>
otbcli_ContrastEnhancement -in colours.tif -out equalizedcolors.tif float -bins <span class="m">256</span> -spatial.local.w <span class="m">500</span> -spatial.local.h <span class="m">500</span> -mode lum
</pre></div>
</div>
<p>From Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Local contrast enhancement by luminance</span>
<span class="kn">import</span> <span class="nn">otbApplication</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">otbApplication</span><span class="o">.</span><span class="n">Registry</span><span class="o">.</span><span class="n">CreateApplication</span><span class="p">(</span><span class="s2">&quot;ContrastEnhancement&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">SetParameterString</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;colours.tif&quot;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterString</span><span class="p">(</span><span class="s2">&quot;out&quot;</span><span class="p">,</span> <span class="s2">&quot;equalizedcolors.tif&quot;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterOutputImagePixelType</span><span class="p">(</span><span class="s2">&quot;out&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterInt</span><span class="p">(</span><span class="s2">&quot;bins&quot;</span><span class="p">,</span> <span class="mi">256</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterInt</span><span class="p">(</span><span class="s2">&quot;spatial.local.w&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterInt</span><span class="p">(</span><span class="s2">&quot;spatial.local.h&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterString</span><span class="p">(</span><span class="s2">&quot;mode&quot;</span><span class="p">,</span><span class="s2">&quot;lum&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">ExecuteAndWriteOutput</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="app_Despeckle.html" class="btn btn-neutral float-right" title="Despeckle" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Image_Filtering.html" class="btn btn-neutral" title="Image Filtering" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 CNES. The OTB CookBook is licensed under a Creative Commons Attribution-ShareAlike 4.0 International license (CC-BY-SA).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/js/versions.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>