

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SampleSelection &mdash; Orfeo ToolBox 6.7.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/otb_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="TrainDimensionalityReduction" href="app_TrainDimensionalityReduction.html" />
    <link rel="prev" title="SampleExtraction" href="app_SampleExtraction.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo-with-text.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                6.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Monteverdi.html">Monteverdi</a></li>
</ul>
<p class="caption"><span class="caption-text">Applications</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../CliInterface.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GraphicalInterface.html">Graphical interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PythonAPI.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../QGISInterface.html">QGIS interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Recipes.html">Recipes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Applications.html">All Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Image_Manipulation.html">Image Manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Feature_Extraction.html">Feature Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="Stereo.html">Stereo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Geometry.html">Geometry</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Learning.html">Learning</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="app_ClassificationMapRegularization.html">ClassificationMapRegularization</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ComputeConfusionMatrix.html">ComputeConfusionMatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ComputeImagesStatistics.html">ComputeImagesStatistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_FusionOfClassifications.html">FusionOfClassifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ImageClassifier.html">ImageClassifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ImageDimensionalityReduction.html">ImageDimensionalityReduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_KMeansClassification.html">KMeansClassification</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_MultiImageSamplingRate.html">MultiImageSamplingRate</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_PolygonClassStatistics.html">PolygonClassStatistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_PredictRegression.html">PredictRegression</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_SOMClassification.html">SOMClassification</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_SampleAugmentation.html">SampleAugmentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_SampleExtraction.html">SampleExtraction</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SampleSelection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app_TrainDimensionalityReduction.html">TrainDimensionalityReduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_TrainImagesClassifier.html">TrainImagesClassifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_TrainRegression.html">TrainRegression</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_TrainVectorClassifier.html">TrainVectorClassifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_VectorClassifier.html">VectorClassifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_VectorDimensionalityReduction.html">VectorDimensionalityReduction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SAR.html">SAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="Segmentation.html">Segmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Vector_Data_Manipulation.html">Vector Data Manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Image_Filtering.html">Image Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hyperspectral.html">Hyperspectral</a></li>
<li class="toctree-l2"><a class="reference internal" href="Change_Detection.html">Change Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="Calibration.html">Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="Deprecated.html">Deprecated</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Advanced use</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../EnvironmentVariables.html">Environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ExtendedFilenames.html">Extended filenames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CompilingOTBFromSource.html">Compiling OTB from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../C++.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contributors.html">Contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Orfeo ToolBox</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../Applications.html">All Applications</a> &raquo;</li>
        
          <li><a href="Learning.html">Learning</a> &raquo;</li>
        
      <li>SampleSelection</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://gitlab.orfeo-toolbox.org/orfeotoolbox/OTB/blob/develop/Documentation/Cookbook/rst/Applications/app_SampleSelection.rst" class="fa fa-gitlab"> Edit on GitLab</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sampleselection">
<span id="id1"></span><h1>SampleSelection<a class="headerlink" href="#sampleselection" title="Permalink to this headline">¶</a></h1>
<p>Selects samples from a training vector data set.</p>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The application selects a set of samples from geometries intended for training (they should have a field giving the associated class).</p>
<p>First of all, the geometries must be analyzed by the <a class="reference internal" href="app_PolygonClassStatistics.html#polygonclassstatistics"><span class="std std-ref">PolygonClassStatistics</span></a> application to compute statistics about the geometries, which are summarized in an xml file.
Then, this xml file must be given as input to this application (parameter instats).</p>
<p>The input support image and the input training vectors shall be given in parameters ‘in’ and ‘vec’ respectively. Only the sampling grid (origin, size, spacing)will be read in the input image.
There are several strategies to select samples (parameter strategy) :</p>
<blockquote>
<div><ul class="simple">
<li>smallest (default) : select the same number of sample in each class so that the smallest one is fully sampled.</li>
<li>constant : select the same number of samples N in each class (with N below or equal to the size of the smallest class).</li>
<li>byclass : set the required number for each class manually, with an input CSV file (first column is class name, second one is the required samples number).</li>
<li>percent: set a target global percentage of samples to use. Class proportions will be respected.</li>
<li>total: set a target total number of samples to use. Class proportions will be respected.</li>
</ul>
</div></blockquote>
<p>There is also a choice on the sampling type to performs :</p>
<blockquote>
<div><ul class="simple">
<li>periodic : select samples uniformly distributed</li>
<li>random : select samples randomly distributed</li>
</ul>
</div></blockquote>
<p>Once the strategy and type are selected, the application outputs samples positions(parameter out).</p>
<p>The other parameters to look at are :</p>
<blockquote>
<div><ul class="simple">
<li>layer : index specifying from which layer to pick geometries.</li>
<li>field : set the field name containing the class.</li>
<li>mask : an optional raster mask can be used to discard samples.</li>
<li>outrates : allows outputting a CSV file that summarizes the sampling rates for each class.</li>
</ul>
</div></blockquote>
<p>As with the <a class="reference internal" href="app_PolygonClassStatistics.html#polygonclassstatistics"><span class="std std-ref">PolygonClassStatistics</span></a> application, different types  of geometry are supported : polygons, lines, points.
The behavior of this application is different for each type of geometry :</p>
<blockquote>
<div><ul class="simple">
<li>polygon: select points whose center is inside the polygon</li>
<li>lines  : select points intersecting the line</li>
<li>points : select closest point to the provided point</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#periodic-sampler-options" id="id2">Periodic sampler options</a></li>
<li><a class="reference internal" href="#set-samples-count-for-each-class-options" id="id3">Set samples count for each class options</a></li>
<li><a class="reference internal" href="#set-the-same-samples-counts-for-all-classes-options" id="id4">Set the same samples counts for all classes options</a></li>
<li><a class="reference internal" href="#use-a-percentage-of-the-samples-available-for-each-class-options" id="id5">Use a percentage of the samples available for each class options</a></li>
<li><a class="reference internal" href="#set-the-total-number-of-samples-to-generate-and-use-class-proportions-options" id="id6">Set the total number of samples to generate, and use class proportions. options</a></li>
<li><a class="reference internal" href="#elevation-management" id="id7">Elevation management</a></li>
</ul>
</div>
<p><strong>InputImage</strong> <code class="code docutils literal notranslate"><span class="pre">-in</span> <span class="pre">image</span></code> <em>Mandatory</em> <br />
Support image that will be classified</p>
<p><strong>InputMask</strong> <code class="code docutils literal notranslate"><span class="pre">-mask</span> <span class="pre">image</span></code> <br />
Validity mask (only pixels corresponding to a mask value greater than 0 will be used for statistics)</p>
<p><strong>Input vectors</strong> <code class="code docutils literal notranslate"><span class="pre">-vec</span> <span class="pre">filename</span> <span class="pre">[dtype]</span></code> <em>Mandatory</em> <br />
Input geometries to analyse</p>
<p><strong>Output vectors</strong> <code class="code docutils literal notranslate"><span class="pre">-out</span> <span class="pre">filename</span> <span class="pre">[dtype]</span></code> <em>Mandatory</em> <br />
Output resampled geometries</p>
<p><strong>Input Statistics</strong> <code class="code docutils literal notranslate"><span class="pre">-instats</span> <span class="pre">filename</span> <span class="pre">[dtype]</span></code> <em>Mandatory</em> <br />
Input file storing statistics (XML format)</p>
<p><strong>Output rates</strong> <code class="code docutils literal notranslate"><span class="pre">-outrates</span> <span class="pre">filename</span> <span class="pre">[dtype]</span></code> <br />
Output rates (CSV formatted)</p>
<p><strong>Sampler type</strong> <code class="code docutils literal notranslate"><span class="pre">-sampler</span> <span class="pre">[periodic|random]</span></code> <em>Default value: periodic</em> <br />
Type of sampling (periodic, pattern based, random)</p>
<ul class="simple">
<li><strong>Periodic sampler</strong> <br /> Takes samples regularly spaced</li>
<li><strong>Random sampler</strong> <br /> The positions to select are randomly shuffled.</li>
</ul>
<div class="section" id="periodic-sampler-options">
<h3><a class="toc-backref" href="#id2">Periodic sampler options</a><a class="headerlink" href="#periodic-sampler-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Jitter amplitude</strong> <code class="code docutils literal notranslate"><span class="pre">-sampler.periodic.jitter</span> <span class="pre">int</span></code> <em>Default value: 0</em> <br />
Jitter amplitude added during sample selection (0 = no jitter)</p>
<hr class="docutils" />
<p><strong>Sampling strategy</strong> <code class="code docutils literal notranslate"><span class="pre">-strategy</span> <span class="pre">[byclass|constant|percent|total|smallest|all]</span></code> <em>Default value: smallest</em> <br /></p>
<ul class="simple">
<li><strong>Set samples count for each class</strong> <br /> Set samples count for each class</li>
<li><strong>Set the same samples counts for all classes</strong> <br /> Set the same samples counts for all classes</li>
<li><strong>Use a percentage of the samples available for each class</strong> <br /> Use a percentage of the samples available for each class</li>
<li><strong>Set the total number of samples to generate, and use class proportions.</strong> <br /> Set the total number of samples to generate, and use class proportions.</li>
<li><strong>Set same number of samples for all classes, with the smallest class fully sampled</strong> <br /> Set same number of samples for all classes, with the smallest class fully sampled</li>
<li><strong>Take all samples</strong> <br /> Take all samples</li>
</ul>
</div>
<div class="section" id="set-samples-count-for-each-class-options">
<h3><a class="toc-backref" href="#id3">Set samples count for each class options</a><a class="headerlink" href="#set-samples-count-for-each-class-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Number of samples by class</strong> <code class="code docutils literal notranslate"><span class="pre">-strategy.byclass.in</span> <span class="pre">filename</span> <span class="pre">[dtype]</span></code> <em>Mandatory</em> <br />
Number of samples by class (CSV format with class name in 1st column and required samples in the 2nd.</p>
</div>
<div class="section" id="set-the-same-samples-counts-for-all-classes-options">
<h3><a class="toc-backref" href="#id4">Set the same samples counts for all classes options</a><a class="headerlink" href="#set-the-same-samples-counts-for-all-classes-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Number of samples for all classes</strong> <code class="code docutils literal notranslate"><span class="pre">-strategy.constant.nb</span> <span class="pre">int</span></code> <em>Mandatory</em> <br />
Number of samples for all classes</p>
</div>
<div class="section" id="use-a-percentage-of-the-samples-available-for-each-class-options">
<h3><a class="toc-backref" href="#id5">Use a percentage of the samples available for each class options</a><a class="headerlink" href="#use-a-percentage-of-the-samples-available-for-each-class-options" title="Permalink to this headline">¶</a></h3>
<p><strong>The percentage to use</strong> <code class="code docutils literal notranslate"><span class="pre">-strategy.percent.p</span> <span class="pre">float</span></code> <em>Default value: 0.5</em> <br />
The percentage to use</p>
</div>
<div class="section" id="set-the-total-number-of-samples-to-generate-and-use-class-proportions-options">
<h3><a class="toc-backref" href="#id6">Set the total number of samples to generate, and use class proportions. options</a><a class="headerlink" href="#set-the-total-number-of-samples-to-generate-and-use-class-proportions-options" title="Permalink to this headline">¶</a></h3>
<p><strong>The number of samples to generate</strong> <code class="code docutils literal notranslate"><span class="pre">-strategy.total.v</span> <span class="pre">int</span></code> <em>Default value: 1000</em> <br />
The number of samples to generate</p>
<hr class="docutils" />
<p><strong>Field Name</strong> <code class="code docutils literal notranslate"><span class="pre">-field</span> <span class="pre">string</span></code> <br />
Name of the field carrying the class name in the input vectors.</p>
<p><strong>Layer Index</strong> <code class="code docutils literal notranslate"><span class="pre">-layer</span> <span class="pre">int</span></code> <em>Default value: 0</em> <br />
Layer index to read in the input vector file.</p>
</div>
<div class="section" id="elevation-management">
<h3><a class="toc-backref" href="#id7">Elevation management</a><a class="headerlink" href="#elevation-management" title="Permalink to this headline">¶</a></h3>
<p>This group of parameters allows managing elevation values. Supported formats are SRTM, DTED or any geotiff. DownloadSRTMTiles application could be a useful tool to list/download tiles related to a product.</p>
<p><strong>DEM directory</strong> <code class="code docutils literal notranslate"><span class="pre">-elev.dem</span> <span class="pre">directory</span></code> <br />
This parameter allows selecting a directory containing Digital Elevation Model files. Note that this directory should contain only DEM files. Unexpected behaviour might occurs if other images are found in this directory.</p>
<p><strong>Geoid File</strong> <code class="code docutils literal notranslate"><span class="pre">-elev.geoid</span> <span class="pre">filename</span> <span class="pre">[dtype]</span></code> <br />
Use a geoid grid to get the height above the ellipsoid in case there is no DEM available, no coverage for some points or pixels with no_data in the DEM tiles. A version of the geoid can be found on the OTB website(<a class="reference external" href="https://gitlab.orfeo-toolbox.org/orfeotoolbox/otb-data/blob/master/Input/DEM/egm96.grd">https://gitlab.orfeo-toolbox.org/orfeotoolbox/otb-data/blob/master/Input/DEM/egm96.grd</a>).</p>
<p><strong>Default elevation</strong> <code class="code docutils literal notranslate"><span class="pre">-elev.default</span> <span class="pre">float</span></code> <em>Default value: 0</em> <br />
This parameter allows setting the default height above ellipsoid when there is no DEM available, no coverage for some points or pixels with no_data in the DEM tiles, and no geoid file has been set. This is also used by some application as an average elevation value.</p>
<hr class="docutils" />
<p><strong>Random seed</strong> <code class="code docutils literal notranslate"><span class="pre">-rand</span> <span class="pre">int</span></code> <br />
Set a specific random seed with integer value.</p>
<p><strong>Available RAM (MB)</strong> <code class="code docutils literal notranslate"><span class="pre">-ram</span> <span class="pre">int</span></code> <em>Default value: 256</em> <br />
Available memory for processing (in MB).</p>
<p><strong>Load parameters from XML</strong> <code class="code docutils literal notranslate"><span class="pre">-inxml</span> <span class="pre">filename.xml</span></code> <br />
Load application parameters from an XML file.</p>
<p><strong>Save parameters to XML</strong> <code class="code docutils literal notranslate"><span class="pre">-outxml</span> <span class="pre">filename.xml</span></code> <br />
Save application parameters to an XML file.</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>From the command-line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>otbcli_SampleSelection -in support_image.tif -vec variousVectors.sqlite -field label -instats apTvClPolygonClassStatisticsOut.xml -out resampledVectors.sqlite
</pre></div>
</div>
<p>From Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">otbApplication</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">otbApplication</span><span class="o">.</span><span class="n">Registry</span><span class="o">.</span><span class="n">CreateApplication</span><span class="p">(</span><span class="s2">&quot;SampleSelection&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">SetParameterString</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;support_image.tif&quot;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterString</span><span class="p">(</span><span class="s2">&quot;vec&quot;</span><span class="p">,</span> <span class="s2">&quot;variousVectors.sqlite&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">ExecuteAndWriteOutput</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="app_TrainDimensionalityReduction.html" class="btn btn-neutral float-right" title="TrainDimensionalityReduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="app_SampleExtraction.html" class="btn btn-neutral" title="SampleExtraction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 CNES. The OTB CookBook is licensed under a Creative Commons Attribution-ShareAlike 4.0 International license (CC-BY-SA).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>