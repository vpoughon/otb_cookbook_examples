

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ColorMapping &mdash; OTB CookBook 6.7.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/otb_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CompareImages" href="app_CompareImages.html" />
    <link rel="prev" title="BandMathX" href="app_BandMathX.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index_TOC.html" class="icon icon-home"> OTB CookBook
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                6.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to Orfeo ToolBox!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CompilingOTBFromSource.html">Compiling OTB from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OTB-Applications.html">A brief tour of OTB Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../QGIS-interface.html">QGIS interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Monteverdi.html">Monteverdi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AdvancedUse.html">Advanced Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Recipes.html">Recipes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Applications.html">Applications</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="Image_Manipulation.html">Image Manipulation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="app_BandMath.html">BandMath</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_BandMathX.html">BandMathX</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ColorMapping</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations">Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="app_CompareImages.html">CompareImages</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ConcatenateImages.html">ConcatenateImages</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_DownloadSRTMTiles.html">DownloadSRTMTiles</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_DynamicConvert.html">DynamicConvert</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ExtractROI.html">ExtractROI</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ManageNoData.html">ManageNoData</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_MultiResolutionPyramid.html">MultiResolutionPyramid</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_PixelValue.html">PixelValue</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_Quicklook.html">Quicklook</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ReadImageInfo.html">ReadImageInfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_SplitImage.html">SplitImage</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_TileFusion.html">TileFusion</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_ZonalStatistics.html">ZonalStatistics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Feature_Extraction.html">Feature Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="Stereo.html">Stereo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Geometry.html">Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="Learning.html">Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAR.html">SAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="Segmentation.html">Segmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Vector_Data_Manipulation.html">Vector Data Manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Image_Filtering.html">Image Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hyperspectral.html">Hyperspectral</a></li>
<li class="toctree-l2"><a class="reference internal" href="Change_Detection.html">Change Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="Calibration.html">Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="Deprecated.html">Deprecated</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../C++.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Contributors.html">Contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index_TOC.html">OTB CookBook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index_TOC.html">Docs</a> &raquo;</li>
        
          <li><a href="../Applications.html">Applications</a> &raquo;</li>
        
          <li><a href="Image_Manipulation.html">Image Manipulation</a> &raquo;</li>
        
      <li>ColorMapping</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://gitlab.orfeo-toolbox.org/orfeotoolbox/OTB/blob/develop/Documentation/Cookbook/rst/Applications/app_ColorMapping.rst" class="fa fa-gitlab"> Edit on GitLab</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="colormapping">
<span id="id1"></span><h1>ColorMapping<a class="headerlink" href="#colormapping" title="Permalink to this headline">¶</a></h1>
<p>Map a label image to 8-bits RGB using look-up tables.</p>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Map a label image to a 8-bits RGB image (both ways) using different methods:</p>
<ul class="simple">
<li><strong>Custom</strong>: use a custom look-up table. The look-up table is loaded from a text file where each line describes an entry. The typical use of this method is to colorise a classification map.</li>
<li><strong>Continuous</strong>: Map a range of values in a scalar input image to a colored image using continuous look-up table, in order to enhance image interpretation. Several look-up tables can been chosen with different color ranges.</li>
<li><strong>Optimal</strong>: Compute an optimal look-up table. When processing a segmentation label image (label to color), the color difference between adjacent segmented regions is maximized. When processing an unknown color image (color to label), all the present colors are mapped to a continuous label list.</li>
<li><strong>Support image</strong>: Use a color support image to associate an average color to each region.</li>
</ul>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#color-to-label-options" id="id2">Color to label options</a></li>
<li><a class="reference internal" href="#color-mapping-with-custom-labeled-look-up-table-options" id="id3">Color mapping with custom labeled look-up table options</a></li>
<li><a class="reference internal" href="#color-mapping-with-continuous-look-up-table-options" id="id4">Color mapping with continuous look-up table options</a></li>
<li><a class="reference internal" href="#compute-an-optimized-look-up-table-options" id="id5">Compute an optimized look-up table options</a></li>
<li><a class="reference internal" href="#color-mapping-with-look-up-table-calculated-on-support-image-options" id="id6">Color mapping with look-up table calculated on support image options</a></li>
</ul>
</div>
<p><strong>Input Image</strong> <code class="code docutils literal notranslate"><span class="pre">-in</span> <span class="pre">image</span></code> <em>Mandatory</em> <br />
Input image filename</p>
<p><strong>Output Image</strong> <code class="code docutils literal notranslate"><span class="pre">-out</span> <span class="pre">image</span> <span class="pre">[dtype]</span></code> <em>Mandatory</em> <br />
Output image filename</p>
<p><strong>Operation</strong> <code class="code docutils literal notranslate"><span class="pre">-op</span> <span class="pre">[labeltocolor|colortolabel]</span></code> <em>Default value: labeltocolor</em> <br />
Selection of the operation to execute (default is: label to color).</p>
<ul class="simple">
<li><strong>Label to color</strong> <br /></li>
<li><strong>Color to label</strong> <br /></li>
</ul>
<div class="section" id="color-to-label-options">
<h3><a class="toc-backref" href="#id2">Color to label options</a><a class="headerlink" href="#color-to-label-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Not Found Label</strong> <code class="code docutils literal notranslate"><span class="pre">-op.colortolabel.notfound</span> <span class="pre">int</span></code> <em>Default value: 404</em> <br />
Label to use for unknown colors.</p>
<hr class="docutils" />
<p><strong>Color mapping method</strong> <code class="code docutils literal notranslate"><span class="pre">-method</span> <span class="pre">[custom|continuous|optimal|image]</span></code> <em>Default value: custom</em> <br />
Selection of color mapping methods and their parameters.</p>
<ul class="simple">
<li><strong>Color mapping with custom labeled look-up table</strong> <br /> Apply a user-defined look-up table to a labeled image. Look-up table is loaded from a text file.</li>
<li><strong>Color mapping with continuous look-up table</strong> <br /> Apply a continuous look-up table to a range of input values.</li>
<li><strong>Compute an optimized look-up table</strong> <br /> [label to color] Compute an optimal look-up table such that neighboring labels in a segmentation are mapped to highly contrasted colors. [color to label] Searching all the colors present in the image to compute a continuous label list</li>
<li><strong>Color mapping with look-up table calculated on support image</strong> <br /></li>
</ul>
</div>
<div class="section" id="color-mapping-with-custom-labeled-look-up-table-options">
<h3><a class="toc-backref" href="#id3">Color mapping with custom labeled look-up table options</a><a class="headerlink" href="#color-mapping-with-custom-labeled-look-up-table-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Look-up table file</strong> <code class="code docutils literal notranslate"><span class="pre">-method.custom.lut</span> <span class="pre">filename</span> <span class="pre">[dtype]</span></code> <em>Mandatory</em> <br />
An ASCII file containing the look-up table
with one color per line
(for instance the line ‘1 255 0 0’ means that all pixels with label 1 will be replaced by RGB color 255 0 0)
Lines beginning with a # are ignored</p>
</div>
<div class="section" id="color-mapping-with-continuous-look-up-table-options">
<h3><a class="toc-backref" href="#id4">Color mapping with continuous look-up table options</a><a class="headerlink" href="#color-mapping-with-continuous-look-up-table-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Look-up tables</strong> <code class="code docutils literal notranslate"><span class="pre">-method.continuous.lut</span> <span class="pre">[red|green|blue|grey|hot|cool|spring|summer|autumn|winter|copper|jet|hsv|overunder|relief]</span></code> <em>Default value: red</em> <br />
Available look-up tables.</p>
<ul class="simple">
<li><strong>Red</strong> <br /></li>
<li><strong>Green</strong> <br /></li>
<li><strong>Blue</strong> <br /></li>
<li><strong>Grey</strong> <br /></li>
<li><strong>Hot</strong> <br /></li>
<li><strong>Cool</strong> <br /></li>
<li><strong>Spring</strong> <br /></li>
<li><strong>Summer</strong> <br /></li>
<li><strong>Autumn</strong> <br /></li>
<li><strong>Winter</strong> <br /></li>
<li><strong>Copper</strong> <br /></li>
<li><strong>Jet</strong> <br /></li>
<li><strong>HSV</strong> <br /></li>
<li><strong>OverUnder</strong> <br /></li>
<li><strong>Relief</strong> <br /></li>
</ul>
<p><strong>Mapping range lower value</strong> <code class="code docutils literal notranslate"><span class="pre">-method.continuous.min</span> <span class="pre">float</span></code> <em>Default value: 0</em> <br />
Set the lower input value of the mapping range.</p>
<p><strong>Mapping range higher value</strong> <code class="code docutils literal notranslate"><span class="pre">-method.continuous.max</span> <span class="pre">float</span></code> <em>Default value: 255</em> <br />
Set the higher input value of the mapping range.</p>
</div>
<div class="section" id="compute-an-optimized-look-up-table-options">
<h3><a class="toc-backref" href="#id5">Compute an optimized look-up table options</a><a class="headerlink" href="#compute-an-optimized-look-up-table-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Background label</strong> <code class="code docutils literal notranslate"><span class="pre">-method.optimal.background</span> <span class="pre">int</span></code> <em>Default value: 0</em> <br />
Value of the background label</p>
</div>
<div class="section" id="color-mapping-with-look-up-table-calculated-on-support-image-options">
<h3><a class="toc-backref" href="#id6">Color mapping with look-up table calculated on support image options</a><a class="headerlink" href="#color-mapping-with-look-up-table-calculated-on-support-image-options" title="Permalink to this headline">¶</a></h3>
<p><strong>Support Image</strong> <code class="code docutils literal notranslate"><span class="pre">-method.image.in</span> <span class="pre">image</span></code> <em>Mandatory</em> <br />
Support image filename. For each label, the LUT is calculated from the mean pixel value in the support image, over the corresponding labeled areas. First of all, the support image is normalized with extrema rejection</p>
<p><strong>NoData value</strong> <code class="code docutils literal notranslate"><span class="pre">-method.image.nodatavalue</span> <span class="pre">float</span></code> <em>Default value: 0</em> <br />
NoData value for each channel of the support image, which will not be handled in the LUT estimation. If NOT checked, ALL the pixel values of the support image will be handled in the LUT estimation.</p>
<p><strong>lower quantile</strong> <code class="code docutils literal notranslate"><span class="pre">-method.image.low</span> <span class="pre">int</span></code> <em>Default value: 2</em> <br />
lower quantile for image normalization</p>
<p><strong>upper quantile</strong> <code class="code docutils literal notranslate"><span class="pre">-method.image.up</span> <span class="pre">int</span></code> <em>Default value: 2</em> <br />
upper quantile for image normalization</p>
<hr class="docutils" />
<p><strong>Available RAM (MB)</strong> <code class="code docutils literal notranslate"><span class="pre">-ram</span> <span class="pre">int</span></code> <em>Default value: 256</em> <br />
Available memory for processing (in MB).</p>
<p><strong>Load parameters from XML</strong> <code class="code docutils literal notranslate"><span class="pre">-inxml</span> <span class="pre">filename.xml</span></code> <br />
Load application parameters from an XML file.</p>
<p><strong>Save parameters to XML</strong> <code class="code docutils literal notranslate"><span class="pre">-outxml</span> <span class="pre">filename.xml</span></code> <br />
Save application parameters to an XML file.</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>From the command-line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>otbcli_ColorMapping -in ROI_QB_MUL_1_SVN_CLASS_MULTI.png -method custom -method.custom.lut ROI_QB_MUL_1_SVN_CLASS_MULTI_PNG_ColorTable.txt -out Colorized_ROI_QB_MUL_1_SVN_CLASS_MULTI.tif
</pre></div>
</div>
<p>From Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">otbApplication</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">otbApplication</span><span class="o">.</span><span class="n">Registry</span><span class="o">.</span><span class="n">CreateApplication</span><span class="p">(</span><span class="s2">&quot;ColorMapping&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">SetParameterString</span><span class="p">(</span><span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;ROI_QB_MUL_1_SVN_CLASS_MULTI.png&quot;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterString</span><span class="p">(</span><span class="s2">&quot;method&quot;</span><span class="p">,</span><span class="s2">&quot;custom&quot;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterString</span><span class="p">(</span><span class="s2">&quot;method.custom.lut&quot;</span><span class="p">,</span> <span class="s2">&quot;ROI_QB_MUL_1_SVN_CLASS_MULTI_PNG_ColorTable.txt&quot;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">SetParameterString</span><span class="p">(</span><span class="s2">&quot;out&quot;</span><span class="p">,</span> <span class="s2">&quot;Colorized_ROI_QB_MUL_1_SVN_CLASS_MULTI.tif&quot;</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">ExecuteAndWriteOutput</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>The segmentation optimal method does not support streaming, and thus large images. The operation color to label is not implemented for the methods continuous LUT and support image LUT.</p>
<p>ColorMapping using support image is not threaded.</p>
</div>
<div class="section" id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">ImageSVMClassifier</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="app_CompareImages.html" class="btn btn-neutral float-right" title="CompareImages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="app_BandMathX.html" class="btn btn-neutral" title="BandMathX" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 CNES. The OTB CookBook is licensed under a Creative Commons Attribution-ShareAlike 4.0 International license (CC-BY-SA).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>